<html lang="en" xmlns:th="http://www.thymeleaf.org">

	<head>
		<title>Add Report</title>

		<link rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
			integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
			crossorigin="anonymous" />
	</head>
	<body>

		<div class="container mt-5">

			<h3>Add New Report</h3>
			<hr/>

			<div class="mt-4 w-100 d-flex justify-content-center">

				<form id="ReportForm" class="w-100" th:action="@{/api/reports/saveReport}" th:object="${report}" method="POST">

					<input type="text" th:field="*{reportName}" class="form-control mb-4 w-100" placeholder="Enter Report Name" />

					<input type="text" th:field="*{query}" class="form-control w-100 mb-4" placeholder="Enter SQL Query" />

					<input type="text" th:field="*{columns}" class="form-control w-100 mb-4" placeholder="Enter Column Names Separated by Comma(,)" />

					<div id="paramsContainer">
						<h3>Parameters</h3>
						<div th:each="param, iterStat : *{paramsMap.keySet()}">
							<input type="text" th:field="*{paramsMap[__${iterStat.index}__]}" placeholder="Key=Value">
							<button type="button" class="removeButton" onclick="removeParam(this)">-</button>
						</div>
					</div>

					<button type="button" id="addParamButton">+</button>


					<button type="submit" class="btn btn-primary col-2">Save</button>
					<input type="hidden" th:field="*{id}" />

				</form>

			</div>

			<hr/>
			<a th:href="@{/api/reports/view}">Back to Report List</a>

		</div>

		<script th:inline="javascript">
			var index = 0;
		</script>
		<script th:src="@{file.js}"></script>



	</body>
</html>